---
eip: 0002
title: Bitcoin SPV support in the sidechain
author: Eduard Topchyan <e.topchyan@pixelplex.io> 
status: Done
created: 2019-12-12
---

## Summary

Simple Payment Verification allows to check the existence of the
transaction mined in the block without downloading and processing the
whole BTC blockchain. Introducing the SPV scheme into the Echo
blockchain allows for the users which are not a part of the committee to
be able to track the transactions in the Bitcoin chain that are related
to Echo BTC sidechain and verify that the corresponding
deposits/withdrawals of eBTC in the Echo blockchain are performed
correctly.

For this purpose Echo chain should store BTC block headers starting from
the point when the Echo blockchain will start to operate and the Merkle
branches of the transactions that are related to Echo sidechain.

## Implementation

SPV support in the Echo blockchain should be implemented as a plugin,
which user can enable to keep track of the BTC sidechain related
transaction.

Plugin should create index in the database for the SPV objects. 

SPV object should contain the block header bytecode and the Merkle
branches for all transactions made to the deposit/intermediate addresses
and the actual transactions bytecode. SPV objects should contain only
block header if there are no transactions to the sidechain tracked BTC
addresses.

This will allow any user of the Echo blockchain to calculate the hash of
the transaction, verify the Merkle branch and Merkle root in the block
header. Also user can iterate through the block headers and validate
overall chain.

These objects should be accessible through the separate API-s for Echo
DB and Echo wallet.

In order to create SPV objects each of the committee members creates SPV
operation which contains details enough for creating the SPV object.
Operation evaluator checks for the existence of the corresponding index
in the Echo database and add the object if the index exists. Otherwise
it does nothing.

Approvals should be collected in the object similar to the most
sidechain objects.
